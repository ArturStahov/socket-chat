{"version":3,"sources":["webpack:///./js/form.js","webpack:///./js/render.js","webpack:///./index.js","webpack:///./template/messageTemplate.hbs"],"names":["FormChat","formSelector","socket","this","formRef","document","querySelector","formAreaRef","formData","_init","_handlerForm","bind","addEventListener","event","preventDefault","value","isOpenSocket","FormData","date","Date","toLocaleString","messageObj","message","getMessage","data","JSON","stringify","send","reset","alert","readyState","OPEN","get","Render","chatListGuard","chatViewRef","addMessage","parse","newMessage","templateMessage","insertAdjacentHTML","scrollIntoView","block","behavior","ws","WebSocket","renderChat","onopen","console","log","onmessage","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"mJAAqBA,E,WACnB,cAAsC,IAAxBC,EAAwB,EAAxBA,aAAcC,EAAU,EAAVA,OAC1BC,KAAKC,QAAUC,SAASC,cAAcL,GACtCE,KAAKI,YAAcJ,KAAKC,QAAQE,cAAc,YAC9CH,KAAKK,SAAW,KAChBL,KAAKD,OAASA,EACdC,KAAKM,Q,2BAGPA,MAAA,WACEN,KAAKO,aAAeP,KAAKO,aAAaC,KAAKR,MAC3CA,KAAKC,QAAQQ,iBAAiB,SAAUT,KAAKO,e,EAG/CA,aAAA,SAAaG,GAGX,GAFAA,EAAMC,iBAEDX,KAAKI,YAAYQ,MAKtB,GAAKZ,KAAKa,eAAV,CAKAb,KAAKK,SAAW,IAAIS,SAASd,KAAKC,SAClC,IAAMc,GAAO,IAAIC,MAAOC,iBAElBC,EAAa,CACjBC,QAASnB,KAAKoB,aACdL,QAGIM,EAAOC,KAAKC,UAAUL,GAC5BlB,KAAKD,OAAOyB,KAAKH,GAEjBrB,KAAKC,QAAQwB,aAfXC,MAAM,4CALNA,MAAM,qB,EAuBVb,aAAA,WACE,OAAOb,KAAKD,OAAO4B,aAAe3B,KAAKD,OAAO6B,M,EAGhDR,WAAA,WACE,OAAOpB,KAAKK,SAASwB,IAAI,Y,0BC5CRC,E,WACnB,cAA+B,IAAjBC,EAAiB,EAAjBA,cACZ/B,KAAKgC,YAAc9B,SAASC,cAAc4B,G,mBAI5CE,WAAA,SAAWZ,GACT,IAAMH,EAAaI,KAAKY,MAAMb,GACxBc,EAAaC,IAAgBlB,GACnClB,KAAKgC,YAAYK,mBAAmB,cAAeF,GACnDnC,KAAKgC,YAAYM,eAAe,CAACC,MAAO,SAAUC,SAAU,Y,KCP1DC,EAAK,IAAIC,UAAU,iDAYnBC,GADW,IAAI9C,EATD,CAClBC,aAAc,aACdC,OAAQ0C,IAQS,IAAIX,EALC,CACtBC,cAAe,kBAejBU,EAAGG,OATH,WACEC,QAAQC,IAAI,kBASdL,EAAGM,UANH,YAA2C,IAAR1B,EAAQ,EAARA,KACjCwB,QAAQC,IAAI,oBAAqBzB,GACjCsB,EAAWV,WAAWZ,K,uBCzBxB,IAAI2B,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,SAAW,CAAC,EAAE,YAAY,KAAO,SAASC,EAAUC,EAAOC,EAAQC,EAASlC,GACzI,IAAImC,EAAQC,EAAiB,MAAVJ,EAAiBA,EAAUD,EAAUM,aAAe,GAAKC,EAAOP,EAAUQ,MAAMC,cAAkCC,EAAOV,EAAUW,iBAAkBC,EAAiBZ,EAAUY,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,oGACHJ,EARuH,mBAQ9GN,EAAmH,OAAzGA,EAASQ,EAAeV,EAAQ,UAAsB,MAAVD,EAAiBW,EAAeX,EAAO,QAAUA,IAAmBG,EAASG,GAAoCH,EAAOc,KAAKb,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOpC,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASmC,GAChT,8DACAM,EAVuH,mBAU9GN,EAAyH,OAA/GA,EAASQ,EAAeV,EAAQ,aAAyB,MAAVD,EAAiBW,EAAeX,EAAO,WAAaA,IAAmBG,EAASG,GAAoCH,EAAOc,KAAKb,EAAO,CAAC,KAAO,UAAU,KAAO,GAAG,KAAOpC,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,EAAE,OAAS,OAASmC,GACxT,0BACJ,SAAU,M","file":"main.ab2f174ff4df0174c6d3.js","sourcesContent":["export default class FormChat {\r\n  constructor({ formSelector, socket }) {\r\n    this.formRef = document.querySelector(formSelector);\r\n    this.formAreaRef = this.formRef.querySelector('textarea');\r\n    this.formData = null;\r\n    this.socket = socket;\r\n    this._init();\r\n  }\r\n\r\n  _init() {\r\n    this._handlerForm = this._handlerForm.bind(this);\r\n    this.formRef.addEventListener('submit', this._handlerForm);\r\n  }\r\n\r\n  _handlerForm(event) {\r\n    event.preventDefault();\r\n\r\n    if (!this.formAreaRef.value) {\r\n      alert('enter message !!');\r\n      return;\r\n    }\r\n\r\n    if (!this.isOpenSocket()) {\r\n      alert('sorry you disconnect, reload page!!');\r\n      return;\r\n    }\r\n\r\n    this.formData = new FormData(this.formRef);\r\n    const date = new Date().toLocaleString();\r\n\r\n    const messageObj = {\r\n      message: this.getMessage(),\r\n      date,\r\n    };\r\n\r\n    const data = JSON.stringify(messageObj);\r\n    this.socket.send(data);\r\n\r\n    this.formRef.reset();\r\n  }\r\n\r\n  isOpenSocket() {\r\n    return this.socket.readyState === this.socket.OPEN;\r\n  }\r\n\r\n  getMessage() {\r\n    return this.formData.get('message');\r\n  }\r\n}\r\n","import templateMessage from '../template/messageTemplate.hbs';\r\n\r\nexport default class Render {\r\n  constructor({ chatListGuard }) {\r\n    this.chatViewRef = document.querySelector(chatListGuard);\r\n\r\n  }\r\n\r\n  addMessage(data) {\r\n    const messageObj = JSON.parse(data);\r\n    const newMessage = templateMessage(messageObj);\r\n    this.chatViewRef.insertAdjacentHTML('beforeBegin', newMessage);\r\n    this.chatViewRef.scrollIntoView({block: \"center\", behavior: \"smooth\"});\r\n  }\r\n}\r\n","import 'reset-css';\nimport './scss/import.scss';\nimport FormChat from './js/form.js';\nimport Render from './js/render.js';\n\nconst ws = new WebSocket('ws://apartment-service-api.herokuapp.com/chat');\n\nconst formOptions = {\n  formSelector: '#chatForma',\n  socket: ws,\n};\n\nconst chatListOptions = {\n  chatListGuard: '#scroolGuard'\n}\n\nconst formChat = new FormChat(formOptions);\nconst renderChat = new Render(chatListOptions);\n\nfunction handlerOpenedSocket() {\n  console.log('socket open!!');\n}\n\nfunction handlerRetraiverMessage({ data }) {\n  console.log('Message from chat', data);\n  renderChat.addMessage(data);\n}\n\nws.onopen = handlerOpenedSocket;\nws.onmessage = handlerRetraiverMessage;\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"message\\\">\\r\\n    <div class=\\\"message_user-info\\\">\\r\\n         <p class=\\\"message_date\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"date\") || (depth0 != null ? lookupProperty(depth0,\"date\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"date\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":33},\"end\":{\"line\":3,\"column\":41}}}) : helper)))\n    + \"</p>\\r\\n    </div>\\r\\n    <p class=\\\"message_text\\\">\\r\\n     \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"message\") || (depth0 != null ? lookupProperty(depth0,\"message\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":5},\"end\":{\"line\":6,\"column\":16}}}) : helper)))\n    + \"\\r\\n    </p>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}